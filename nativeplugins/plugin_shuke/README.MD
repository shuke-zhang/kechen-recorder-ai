# ğŸ“˜ plugin_shuke ä½¿ç”¨æ•™ç¨‹

## ğŸ§© æ’ä»¶ç®€ä»‹

`plugin_shuke` æ˜¯ä¸€ä¸ª UniApp åŸç”Ÿæ’ä»¶ï¼Œç”¨äºåœ¨ Android ç«¯æ’­æ”¾éŸ³é¢‘ä»»åŠ¡é˜Ÿåˆ—ã€‚  
å®ƒå…·å¤‡ä»¥ä¸‹åŠŸèƒ½ï¼š

- âœ… **æŒ‰ä»»åŠ¡ ID é¡ºåºæ’­æ”¾ï¼ˆ0 â†’ 1 â†’ 2 â†’ 3...ï¼‰**
- ğŸ•’ **æ”¯æŒå¼‚æ­¥ä»»åŠ¡åˆ°è¾¾ç­‰å¾…**ï¼ˆç¼ºå£ç­‰å¾…ï¼Œä¸ä¼šæ’é˜Ÿï¼‰
- ğŸ¯ **æ”¯æŒé…ç½® startPlayId**ï¼Œå¿½ç•¥å°äºè¯¥ ID çš„ä»»åŠ¡
- ğŸ”„ **æ’­æ”¾è¿›åº¦å›è°ƒã€é”™è¯¯å›è°ƒã€è¾“å‡ºé€šé“åˆ‡æ¢å›è°ƒ**
- ğŸ§ **æ”¯æŒæ‰¬å£°å™¨ / å¬ç­’ / è“ç‰™è€³æœº åˆ‡æ¢**

## ğŸ“‚ æ’ä»¶ç›®å½•ç»“æ„

```
uni_modules/
â””â”€â”€ plugin_shuke/
    â”œâ”€â”€ package.json
    â”œâ”€â”€ android/
    â”‚   â”œâ”€â”€ build.gradle
    â”‚   â”œâ”€â”€ AndroidManifest.xml
    â”‚   â””â”€â”€ src/
    â”‚       â””â”€â”€ main/
    â”‚           â””â”€â”€ java/
    â”‚               â””â”€â”€ com/
    â”‚                   â””â”€â”€ example/
    â”‚                       â””â”€â”€ plugin_shuke/
    â”‚                           â”œâ”€â”€ AudioQueuePlayer.java
    â”‚                           â””â”€â”€ AudioModule.java
    â””â”€â”€ manifest.json
```

## âš™ï¸ ä¸»è¦æ–‡ä»¶è¯´æ˜

- `AudioQueuePlayer.java`: æ§åˆ¶æ’­æ”¾é€»è¾‘ï¼Œä¸¥æ ¼é¡ºåºæ’­æ”¾ã€‚
- `AudioModule.java`: è¿æ¥ UniApp ä¸ Java å±‚æ¥å£ã€‚

## ğŸª„ JS ä½¿ç”¨ç¤ºä¾‹

```ts
const plugin = uni.requireNativePlugin('plugin_shuke')

plugin.init?.({ startPlayId: 0 }, (msg: any) => {
  console.log('åˆå§‹åŒ–ç»“æœ', msg)
})

plugin.onEvent((res: any) => {
  const msg = typeof res === 'string' ? JSON.parse(res) : res
  const { type, data } = msg
  console.log('äº‹ä»¶:', type, data)
})

plugin.addTask('1', base64_audio1)
plugin.addTask('2', base64_audio2)
plugin.addTask('0', base64_audio0)
```

## ğŸ“¡ äº‹ä»¶è¯´æ˜

| äº‹ä»¶ | è¯´æ˜ |
|------|------|
| ready | æ’ä»¶åˆå§‹åŒ–å®Œæˆ |
| queued | ä»»åŠ¡åŠ å…¥é˜Ÿåˆ— |
| start | å¼€å§‹æ’­æ”¾æŸä¸ªä»»åŠ¡ |
| progress | æ’­æ”¾è¿›åº¦æ›´æ–° |
| complete | å•ä¸ªä»»åŠ¡æ’­æ”¾å®Œæˆ |
| queueEmpty | é˜Ÿåˆ—æ’­æ”¾å®Œæ¯• |
| error | æ’­æ”¾å‡ºé”™ |
| modeChanged | è¾“å‡ºé€šé“åˆ‡æ¢ |

## ğŸš€ æ‰“åŒ…è¯´æ˜

åœ¨ Android Studio ä¸­æ‰“å¼€ `uni_modules/plugin_shuke/android`ï¼Œæ£€æŸ¥ï¼š

**build.gradle**
```gradle
apply plugin: 'com.android.library'

android {
  compileSdkVersion 34
  defaultConfig {
    minSdkVersion 24
    targetSdkVersion 34
  }
}

dependencies {
  implementation 'androidx.appcompat:appcompat:1.6.1'
}
```

**AndroidManifest.xml**
```xml
<manifest xmlns:android="http://schemas.android.com/apk/res/android">
  <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS"/>
  <uses-permission android:name="android.permission.BLUETOOTH"/>
  <uses-permission android:name="android.permission.RECORD_AUDIO"/>
</manifest>
```

## ğŸ’¬ ç‰ˆæœ¬ä¿¡æ¯

| é¡¹ç›® | å†…å®¹ |
|------|------|
| æ’ä»¶å | plugin_shuke |
| å¹³å° | Android |
| ä½œè€… | Shuke Audio Plugin |
| æ›´æ–°æ—¶é—´ | 2025-10 |
